
\section{Pipeline Method}
In this work, the pipeline approach was analyzed using an OSA (Obstructive Sleep Apnea) prediction script as a use case.
\normalsize

\lstinputlisting[
  inputencoding=cp1252,  language=Python,
  firstline=1,
  lastline=31,
  caption={Extracted from \texttt{osa\_pipeline.xml} (lines 1--31)},
  label={lst:automat-snippet}
]{osa_pipeline.xml}

\noindent\footnotesize See the corresponding lines on GitHub:\url{ https://github.com/tanaebousfiha/XNAT-implemetation/blob/f1ea7a23800a9a1dbd2ca8f5a79685f9ab3f04bb/XNAT%20ML%20Plugin/osa_pipeline.xml#L1-L31}
\normalsize
\\
The \autoref{lst:automat-snippet} presents a resource descriptor for a Python script, specifying its location and input arguments such as configuration file.

The XNAT pipeline system consist of two main components: \\
the Pipeline Engine, which executes workflow definitions, and the XNAT Pipeline Engine Plugin, which enables interaction with the XNAT interface.
By default, pipelines are stored in the directory /data/xnat/home/pipeline/. During the initial setup, the Pipeline Engine is initialized via a Secure Shell (SSH) session by running
<PIPELINE\_HOME>/setup.sh YOUR\_ADMIN\_EMAIL\_ID YOUR\_SMTP\_SERVER,
which generates the configuration file pipeline.config. This file contains essential parameters such as the site identifier and administrator email address~\cite{installpipeline}.\\
Usually a complete Pipeline in XNAT is composed of three XML configuration layers:\\
First a resource descriptor: which defines the executable component. \\
Second parameters File, which provides concrete runtime values for these input arguments, such as configuration files.\\
Third pipeline Descriptor, which  specifies which scripts to execute, in which order, and how the outputs should be handled~\cite{pipelinediscussion}. The \autoref{fig:pipeline} defines the essentials element to run a pipeline in XNAT. 
\begin{figure}[H]
    \centering
    \def\svgwidth{0.7\linewidth}
    \input{pipeline.pdf_tex}
    \caption{ Diagram: Conceptual diagram of the XNAT Pipeline Engine workflow.}
    \label{fig:pipeline}
\end{figure}


\normalsize



\subsection{The Pipeline and the REST API}


The POST /pipelines/launch/pipelineName endpoint~\cite{pipelinerestapi} in XNAT's REST API1
 enables automated execution of registered pipelines. However, the lack of endpoints for global pipeline enablement and project assignment means that deployment and project-level setup require manual configuration.

\section{User Guide for the Pipeline Approach}
To gain a better understanding of the pipeline approach, \autoref{tab:pipeline} provides an explanation of all the steps involved in this approach.
\begin{table}[H]
  \centering
  \caption{ User guide the pipeline method.}
  \label{tab:pipeline}
  \begin{tabular}{|l|p{9cm}|}
  \hline
  \textbf{Download Requirements steps} & 
  1.Pipeline Engine installed. \newline
  2.Pipeline Engine Plugin installed \newline
  3.Create and configure the pipeline descriptor components. \newline
  $\bullet$ Make sure the resource descriptor, parameter file, and pipeline descriptor are located in the same directory under the Pipeline Home path: \texttt{/data/xnat/pipeline/pipelines/my\_pipeline/} \newline
  $\bullet$ Ensure Secure Shell (SSH) access is available and the pipeline script has execution permission using: chmod +x my\_pipeline.xml. 
   \\  \hline
  \textbf{Enabling the Pipeline in XNAT} & 
    $\bullet$ In XNAT interface, go to Administer â†’ Pipelines. Provide the full path to your pipeline directory. \newline
    $\bullet$ Then navigate to Administer -> Data Types.\newline
    $\bullet$ Click on the desired data type element. \newline
    $\bullet$ Click Edit in the top-right corner of the modal window.\newline
    $\bullet$ Under Available Report Actions, add the following values:\newline
    -Name: PipelineScreen\_launch\_pipeline\newline
    -Display Name: Build\newline
    -Popup: always\newline
    -Secure Access: edit
  \\ \hline
  \textbf{Launching the Pipeline} & 
   $\bullet$ Manually: From the data type page, click Run/Build Pipeline. \newline
   $\bullet$ Programmatically via REST API.\newline
   -Once the pipeline starts, you will receive an notification confirming the launch or completion~\cite{pipelinrunning}
   \\
  \hline
  \textbf{Problems / Troubleshooting} & 
  $\bullet$ Pipeline not found:\newline
    Ensure all pipeline descriptor files are correctly placed in the Pipeline Home directory. \newline
  $\bullet$ Pipeline failed execution:
   Re-run the following command to reset file permissions:\newline
    chmod +x my\_pipeline.xml
  -Check logs: Review the XNAT logs for details\newline
  $\bullet$ Incorrect pipeline registration: Verify that the pipeline path is correctly configured under Administer -> Pipelines.
  
  \\
  \hline
  \end{tabular}
\end{table}