%PDF-1.3
%ºß¬à
3 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 4 0 R
>>
endobj
4 0 obj
<<
/Length 3320
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(Exportiert aus HAWKI am: 10.6.2025 von Bousfiha, Tanae) Tj
ET
BT
/F2 18 Tf
20.6999999999999993 TL
0 g
70.8661417322834666 728.5041732283464171 Td
(Zusammenfassung) Tj
ET
BT
/F3 14 Tf
16.0999999999999979 TL
0 g
240.9448818897637921 728.5041732283464171 Td
( \(automatisiert erstellt\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 700.15771653543311 Td
(Das bereitgestellte Skript führt die OSA-Analyse ohne die `chmod`-Zeile durch, um) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 681.7577165354330191 Td
(die Dateiberechtigungen nach dem Speichern zu ändern. Es liest eine Eingabedatei,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 663.3577165354330418 Td
(berechnet das Risiko basierend auf Geschlecht und Antworten, speichert das) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 644.9577165354330646 Td
(Ergebnis in einer CSV-Datei und gibt den Ordnerinhalt aus. Die Zeile zur Anpassung) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 626.5577165354330873 Td
(der Berechtigungen wurde entfernt, wodurch die Datei mit Standard-Rechten bleibt,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 608.15771653543311 Td
(was in vielen Umgebungen ausreichend und sicherer ist. Falls spezielle) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 589.7577165354330191 Td
(Berechtigungen erforderlich sind, kann die `chmod`-Zeile später wieder eingefügt) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 571.3577165354330418 Td
(werden.) Tj
ET
BT
/F2 18 Tf
20.6999999999999993 TL
0 g
70.8661417322834666 496.2648031496062799 Td
(Systemprompt) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 453.7451181102362057 Td
(Du bist ein intelligentes und unterstützendes KI-Assistenzsystem für alle) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 435.3451181102362284 Td
(Hochschulangehörigen der HAWK Hildesheim/Holzminden/Göttingen. Dein Ziel ist es,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 416.9451181102361943 Td
(Studierende, Lehrende, Forschende und Mitarbeitende in ihrer akademischen Arbeit,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 398.545118110236217 Td
(beim Lernen, Forschen, Lehren und verwalterischen Aufgaben zu unterstützen. Dabei) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 380.1451181102361829 Td
(förderst du kollaboratives Arbeiten, wissenschaftliches Denken und eine kreative) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 361.7451181102362057 Td
(Problemlösung. Beziehe dich auf wissenschaftliche Methoden und Theorien,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 343.3451181102362284 Td
(argumentiere sachlich und reflektiere kritisch. Sei objektiv und verzichte auf) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 324.9451181102361943 Td
(unbegründete Meinungen. Fördere akademische Integrität und unterstütze keine) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 306.545118110236217 Td
(Plagiate. Sei inklusiv, wertschätzend und respektiere Vielfalt.) Tj
ET
endstream
endobj
5 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 6 0 R
>>
endobj
6 0 obj
<<
/Length 3731
>>
stream
0.5670000000000001 w
0 G
BT
/F2 18 Tf
20.6999999999999993 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(Verlauf:) Tj
ET
BT
/F2 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 756.8506299212598378 Td
(Bousfiha, Tanae:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 728.5041732283464171 Td
(import os) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 710.1041732283464398 Td
(import pandas as pd) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 673.3041732283463716 Td
(# Konfiguration) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 654.904173228346508 Td
(INPUT_DIR = &quot;/app/input&quot;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 636.5041732283464171 Td
(OUTPUT_DIR = &quot;/app/output&quot;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 618.1041732283464398 Td
(OUTPUT_FILE = &quot;osa_result.csv&quot; # exakt) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 599.7041732283464626 Td
(dieser Dateiname wird von XNAT erwartet) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 562.904173228346508 Td
(def calculate_osa_risk_single\(row\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 544.5041732283464171 Td
(# Alle Keys und Werte bereinigen) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 526.1041732283464398 Td
(row = {k.strip\(\).lower\(\): str\(v\).strip\(\).lower\(\) for k, v in) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 507.7041732283464626 Td
(row.items\(\) if pd.notnull\(v\)}) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 470.9041732283464512 Td
(geschlecht = row.get\(&quot;geschlecht&quot;,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 452.5041732283464739 Td
(&quot;&quot;\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 434.1041732283464398 Td
(geschlecht_score = 1 if geschlecht in [&#039;m&#039;,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 415.7041732283464626 Td
(&#039;mann&#039;, &#039;manlich&#039;,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 397.3041732283464853 Td
(&#039;männlich&#039;] else 0) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 360.5041732283464739 Td
(score = geschlecht_score) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 342.1041732283464967 Td
(for key, value in row.items\(\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 323.7041732283464626 Td
(if key != &#039;geschlecht&#039;:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 305.3041732283464853 Td
(score += 1 if value == &quot;yes&quot; else 0) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 268.5041732283465308 Td
(if score &gt;= 5:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 250.1041732283464398 Td
(risiko = &quot;hoch&quot;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 231.7041732283464626 Td
(elif score &gt;= 3:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 213.3041732283464853 Td
(risiko = &quot;mittel&quot;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 194.904173228346508 Td
(else:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 176.5041732283465308 Td
(risiko = &quot;niedrig&quot;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 139.7041732283464626 Td
(return pd.DataFrame\([{&quot;stopbang_score&quot;:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 121.3041732283464853 Td
(score, &quot;osa_risiko&quot;: risiko}]\)) Tj
ET
endstream
endobj
7 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 8 0 R
>>
endobj
8 0 obj
<<
/Length 4083
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(def main\(\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 766.7970866141731676 Td
(print\(&quot Start OSA-Analyse&quot;\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 729.9970866141732131 Td
(# Stelle sicher, dass das Output-Verzeichnis existiert) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 711.5970866141732358 Td
(os.makedirs\(OUTPUT_DIR, exist_ok=True\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 674.7970866141731676 Td
(# Ausgabe vor dem Start) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 656.3970866141731904 Td
(print\(&quot; Inhalt von INPUT_DIR:&quot;,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 637.9970866141732131 Td
(os.listdir\(INPUT_DIR\)\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 601.1970866141732586 Td
(input_files = [f for f in os.listdir\(INPUT_DIR\) if) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 582.7970866141731676 Td
(f.lower\(\).endswith\(\(&#039;.csv&#039;, &#039;.tsv&#039;,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 564.397086614173304 Td
(&#039;.txt&#039;\)\)]) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 545.9970866141732131 Td
(print\(&quot;Gefundene Eingabedateien:&quot;,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 527.5970866141732358 Td
(input_files\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 490.7970866141732245 Td
(result_df =) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 472.3970866141732472 Td
(pd.DataFrame\([{&quot;stopbang_score&quot;:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 453.9970866141732699 Td
(&quot;Fehler&quot;, &quot;osa_risiko&quot;:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 435.5970866141732358 Td
(&quot;Keine Eingabedatei gefunden&quot;}]\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 398.7970866141732245 Td
(if input_files:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 380.3970866141732472 Td
(input_file = input_files[0]) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 361.9970866141732699 Td
(input_path = os.path.join\(INPUT_DIR, input_file\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 343.5970866141732358 Td
(print\(f&quot; Verarbeite Datei: {input_file}&quot;\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 306.7970866141732813 Td
(# Trennzeichen erkennen) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 288.397086614173304 Td
(try:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 269.9970866141732131 Td
(if input_path.endswith\(&quot;.csv&quot;\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 251.5970866141732358 Td
(sep = &quot;,&quot;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 233.1970866141732586 Td
(elif input_path.endswith\(&quot;.tsv&quot;\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 214.7970866141732813 Td
(sep = &quot;\\t&quot;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 196.397086614173304 Td
(elif input_path.endswith\(&quot;.txt&quot;\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 177.9970866141733268 Td
(with open\(input_path, &#039;r&#039;,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 159.5970866141732358 Td
(encoding=&#039;utf-8&#039;\) as f:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 141.1970866141732586 Td
(first_line = f.readline\(\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 122.7970866141732813 Td
(if first_line.count\(&#039;;&#039;\) &gt;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 104.3970866141734177 Td
(first_line.count\(&#039;,&#039;\) and) Tj
ET
endstream
endobj
9 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 10 0 R
>>
endobj
10 0 obj
<<
/Length 3986
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(first_line.count\(&#039;;&#039;\) &gt;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 766.7970866141731676 Td
(first_line.count\(&#039;\\t&#039;\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 748.3970866141731904 Td
(sep = &#039;;&#039;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 729.9970866141732131 Td
(elif first_line.count\(&#039;\\t&#039;\) &gt;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 711.5970866141732358 Td
(first_line.count\(&#039;,&#039;\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 693.1970866141732586 Td
(sep = &#039;\\t&#039;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 674.7970866141731676 Td
(else:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 656.3970866141731904 Td
(sep = &#039;,&#039;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 637.9970866141732131 Td
(else:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 619.5970866141732358 Td
(sep = &quot;,&quot;) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 582.7970866141731676 Td
(df = pd.read_csv\(input_path, sep=sep\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 564.397086614173304 Td
(print\(&quot; Gelesene Daten:&quot;\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 545.9970866141732131 Td
(print\(df\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 509.1970866141732586 Td
(if df.empty or len\(df\) != 1:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 490.7970866141732245 Td
(raise ValueError\(&quot;Datei ist leer oder enthält mehr) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 472.3970866141732472 Td
(als einen Patienten.&quot;\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 435.5970866141732358 Td
(result_df = calculate_osa_risk_single\(df.iloc[0].to_dict\(\)\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 398.7970866141732245 Td
(except Exception as e:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 380.3970866141732472 Td
(print\(f&quot; Fehler bei der Verarbeitung von {input_file}:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 361.9970866141732699 Td
({e}&quot;\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 343.5970866141732358 Td
(result_df =) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 325.1970866141732586 Td
(pd.DataFrame\([{&quot;stopbang_score&quot;:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 306.7970866141732813 Td
(&quot;Fehler&quot;, &quot;osa_risiko&quot;: str\(e\)}]\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 269.9970866141732131 Td
(output_path = os.path.join\(OUTPUT_DIR,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 251.5970866141732358 Td
(OUTPUT_FILE\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 233.1970866141732586 Td
(print\(&quot; Speichere Ergebnis nach:&quot;,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 214.7970866141732813 Td
(output_path\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 177.9970866141733268 Td
(try:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 159.5970866141732358 Td
(result_df.to_csv\(output_path, index=False\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 141.1970866141732586 Td
(print\(&quot; Datei erfolgreich gespeichert.&quot;\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 122.7970866141732813 Td
(except Exception as e:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 104.3970866141734177 Td
(print\(&quot; Fehler beim Speichern:&quot;, e\)) Tj
ET
endstream
endobj
11 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 12 0 R
>>
endobj
12 0 obj
<<
/Length 3599
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 766.7970866141731676 Td
(# Berechtigungen setzen \(optional\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 748.3970866141731904 Td
(try:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 729.9970866141732131 Td
(os.chmod\(output_path, 0o666\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 711.5970866141732358 Td
(print\(&quot; chmod erfolgreich gesetzt.&quot;\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 693.1970866141732586 Td
(except Exception as e:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 674.7970866141731676 Td
(print\(&quot; chmod Fehler:&quot;, e\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 637.9970866141732131 Td
(# Inhalt des Output-Verzeichnisses zur Kontrolle) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 619.5970866141732358 Td
(print\(&quot; Inhalt von OUTPUT_DIR:&quot;,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 601.1970866141732586 Td
(os.listdir\(OUTPUT_DIR\)\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 564.397086614173304 Td
(if __name__ == &quot;__main__&quot;:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 545.9970866141732131 Td
(main\(\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 509.1970866141732586 Td
(kannst du das korrigiren ) Tj
ET
BT
/F2 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 462.4506299212598606 Td
(HAWKI) Tj
ET
BT
/F2 10 Tf
11.5 TL
0 g
128.9763779527559109 462.4506299212598606 Td
(\(gpt-4.1\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 434.1041732283464398 Td
(Gerne, hier ist dein Python-Skript zur OSA-Analyse bereinigt, die Emojis wurden) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 415.7041732283464626 Td
(entfernt und die Lesbarkeit steigert:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 378.9041732283464512 Td
(```python) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 360.5041732283464739 Td
(import os) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 342.1041732283464967 Td
(import pandas as pd) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 305.3041732283464853 Td
(# Konfiguration) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 286.904173228346508 Td
(INPUT_DIR = "/app/input") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 268.5041732283465308 Td
(OUTPUT_DIR = "/app/output") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 250.1041732283464398 Td
(OUTPUT_FILE = "osa_result.csv"  # exakt dieser Dateiname wird von XNAT erwartet) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 213.3041732283464853 Td
(def calculate_osa_risk_single\(row\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 194.904173228346508 Td
(    # Bereinigung der Keys und Werte) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 176.5041732283465308 Td
(    row = {k.strip\(\).lower\(\): str\(v\).strip\(\).lower\(\) for k, v in row.items\(\) if pd.notnull\(v\)}) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 139.7041732283464626 Td
(    geschlecht = row.get\("geschlecht", ""\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 121.3041732283464853 Td
(    geschlecht_score = 1 if geschlecht in ['m', 'mann', 'manlich', 'männlich'] else 0) Tj
ET
endstream
endobj
13 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 14 0 R
>>
endobj
14 0 obj
<<
/Length 3959
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(    score = geschlecht_score) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 766.7970866141731676 Td
(    for key, value in row.items\(\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 748.3970866141731904 Td
(        if key != 'geschlecht':) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 729.9970866141732131 Td
(            if value == "yes":) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 711.5970866141732358 Td
(                score += 1) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 674.7970866141731676 Td
(    if score >= 5:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 656.3970866141731904 Td
(        risiko = "hoch") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 637.9970866141732131 Td
(    elif score >= 3:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 619.5970866141732358 Td
(        risiko = "mittel") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 601.1970866141732586 Td
(    else:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 582.7970866141731676 Td
(        risiko = "niedrig") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 545.9970866141732131 Td
(    return pd.DataFrame\([{"stopbang_score": score, "osa_risiko": risiko}]\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 509.1970866141732586 Td
(def main\(\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 490.7970866141732245 Td
(    print\("Start OSA-Analyse"\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 472.3970866141732472 Td
(    # Stelle sicher, dass das Output-Verzeichnis existiert) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 453.9970866141732699 Td
(    os.makedirs\(OUTPUT_DIR, exist_ok=True\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 417.1970866141732586 Td
(    print\("Inhalt von INPUT_DIR:", os.listdir\(INPUT_DIR\)\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 380.3970866141732472 Td
(    input_files = [f for f in os.listdir\(INPUT_DIR\) if f.lower\(\).endswith\(\('.csv', '.tsv', '.txt'\)\)]) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 361.9970866141732699 Td
(    print\("Gefundene Eingabedateien:", input_files\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 325.1970866141732586 Td
(    result_df = pd.DataFrame\([{"stopbang_score": "Fehler", "osa_risiko": "Keine) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 306.7970866141732813 Td
(Eingabedatei gefunden"}]\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 269.9970866141732131 Td
(    if input_files:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 251.5970866141732358 Td
(        input_file = input_files[0]) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 233.1970866141732586 Td
(        input_path = os.path.join\(INPUT_DIR, input_file\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 214.7970866141732813 Td
(        print\(f"Verarbeite Datei: {input_file}"\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 177.9970866141733268 Td
(        # Trennzeichen erkennen) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 159.5970866141732358 Td
(        try:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 141.1970866141732586 Td
(            if input_path.endswith\(".csv"\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 122.7970866141732813 Td
(                sep = ",") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 104.3970866141734177 Td
(            elif input_path.endswith\(".tsv"\):) Tj
ET
endstream
endobj
15 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 16 0 R
>>
endobj
16 0 obj
<<
/Length 4337
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(                sep = "\\t") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 766.7970866141731676 Td
(            elif input_path.endswith\(".txt"\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 748.3970866141731904 Td
(                with open\(input_path, 'r', encoding='utf-8'\) as f:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 729.9970866141732131 Td
(                    first_line = f.readline\(\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 711.5970866141732358 Td
(                    if first_line.count\(';'\) > max\(first_line.count\(','\), first_line.count\('\\t'\)\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 693.1970866141732586 Td
(                        sep = ';') Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 674.7970866141731676 Td
(                    elif first_line.count\('\\t'\) > first_line.count\(','\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 656.3970866141731904 Td
(                        sep = '\\t') Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 637.9970866141732131 Td
(                    else:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 619.5970866141732358 Td
(                        sep = ',') Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 601.1970866141732586 Td
(            else:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 582.7970866141731676 Td
(                sep = ",") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 545.9970866141732131 Td
(            df = pd.read_csv\(input_path, sep=sep\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 527.5970866141732358 Td
(            print\("Gelesene Daten:"\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 509.1970866141732586 Td
(            print\(df\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 472.3970866141732472 Td
(            if df.empty or len\(df\) != 1:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 453.9970866141732699 Td
(                raise ValueError\("Datei ist leer oder enthält mehr als einen Patienten."\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 417.1970866141732586 Td
(            result_df = calculate_osa_risk_single\(df.iloc[0].to_dict\(\)\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 380.3970866141732472 Td
(        except Exception as e:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 361.9970866141732699 Td
(            print\(f"Fehler bei der Verarbeitung von {input_file}: {e}"\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 343.5970866141732358 Td
(            result_df = pd.DataFrame\([{"stopbang_score": "Fehler", "osa_risiko": str\(e\)}]\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 306.7970866141732813 Td
(    output_path = os.path.join\(OUTPUT_DIR, OUTPUT_FILE\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 288.397086614173304 Td
(    print\("Speichere Ergebnis nach:", output_path\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 251.5970866141732358 Td
(    try:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 233.1970866141732586 Td
(        result_df.to_csv\(output_path, index=False\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 214.7970866141732813 Td
(        print\("Datei erfolgreich gespeichert."\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 196.397086614173304 Td
(    except Exception as e:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 177.9970866141733268 Td
(        print\("Fehler beim Speichern:", e\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 141.1970866141732586 Td
(    # Berechtigungen setzen \(optional\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 122.7970866141732813 Td
(    try:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 104.3970866141734177 Td
(        os.chmod\(output_path, 0o666\)) Tj
ET
endstream
endobj
17 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 18 0 R
>>
endobj
18 0 obj
<<
/Length 3807
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(        print\("chmod erfolgreich gesetzt."\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 766.7970866141731676 Td
(    except Exception as e:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 748.3970866141731904 Td
(        print\("chmod Fehler:", e\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 711.5970866141732358 Td
(    print\("Inhalt von OUTPUT_DIR:", os.listdir\(OUTPUT_DIR\)\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 674.7970866141731676 Td
(if __name__ == "__main__":) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 656.3970866141731904 Td
(    main\(\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 637.9970866141732131 Td
(```) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 601.1970866141732586 Td
(**Änderungen:**) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 582.7970866141731676 Td
(- Alle Emojis und überflüssige Leerzeilen entfernt.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 564.397086614173304 Td
(- \(Für Übersichtlichkeit\) Die Kommentare wurden so gelassen, dass das Skript weiter) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 545.9970866141732131 Td
(für Dritte nachvollziehbar ist.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 527.5970866141732358 Td
(- Funktionale Logik und Ausgabeformatierungen beibehalten.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 490.7970866141732245 Td
(Falls weitere Anpassungen gewünscht werden \(z.B. Logging auf Datei statt Console,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 472.3970866141732472 Td
(Fehlerbehandlung etc.\), gib gerne Bescheid!) Tj
ET
BT
/F2 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 425.6506299212598492 Td
(Bousfiha, Tanae:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 397.3041732283464853 Td
(ist die chmod wichtig oder kann man weg machen) Tj
ET
BT
/F2 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 350.5577165354330873 Td
(HAWKI) Tj
ET
BT
/F2 10 Tf
11.5 TL
0 g
128.9763779527559109 350.5577165354330873 Td
(\(gpt-4.1\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 322.2112598425196666 Td
(Die Zeile  ) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 303.8112598425196893 Td
(```python) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 285.411259842519712 Td
(os.chmod\(output_path, 0o666\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 267.0112598425197348 Td
(```) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 248.6112598425196438 Td
(setzt die Datei-Berechtigungen für die Ausgabedatei \(`osa_result.csv`\) so, dass **alle) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 230.2112598425196666 Td
(Benutzer** Lese- und Schreibrechte erhalten. Das ist nicht in jedem Kontext) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 211.8112598425196893 Td
(notwendig – und in vielen Fällen sogar aus Sicherheitsgründen **nicht) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 193.411259842519712 Td
(empfehlenswert**.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 156.6112598425197575 Td
(### Wann ist `chmod` sinnvoll?) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 119.8112598425196893 Td
(- Wenn das Skript in einer Umgebung läuft, in der verschiedene Prozesse \(bzw. User\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 101.4112598425195984 Td
(auf die Datei zugreifen müssen.) Tj
ET
endstream
endobj
19 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 20 0 R
>>
endobj
20 0 obj
<<
/Length 3954
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(- Manche automatisierte Systeme \(z.B. XNAT, Docker, spezielle Workflows\) erwarten,) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 766.7970866141731676 Td
(dass die Datei nicht nur vom aktuellen Prozess, sondern auch von anderen) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 748.3970866141731904 Td
(Nutzern/Prozessen beschreibbar/lesbar ist.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 729.9970866141732131 Td
(- In bestimmten Container- oder Netzwerkmount-Szenarien entstehen manchmal) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 711.5970866141732358 Td
(Rechteprobleme. Dann kann ein explizites `chmod` helfen, Probleme zu vermeiden.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 674.7970866141731676 Td
(### Wann ist `chmod` nicht nötig?) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 656.3970866141731904 Td
(- Wenn du weißt, dass **nur** dein eigener Prozess auf die Datei zugreift.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 637.9970866141732131 Td
(- Die Standard-Berechtigungen reichen meist aus, insbesondere wenn das Script) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 619.5970866141732358 Td
(nicht in einer Multi-User- oder automatisierten Umgebung läuft.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 582.7970866141731676 Td
(### Empfehlung) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 545.9970866141732131 Td
(**Im Normalfall kannst du die `chmod`-Zeile weglassen**, es sei denn, du hast einen) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 527.5970866141732358 Td
(speziellen Grund \(s.o.\) oder die Anforderungen der Umgebung verlangen es) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 509.1970866141732586 Td
(ausdrücklich.  ) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 490.7970866141732245 Td
(Das Entfernen wird i.d.R. keine Probleme verursachen:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 453.9970866141732699 Td
(```python) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 435.5970866141732358 Td
(# os.chmod\(output_path, 0o666\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 417.1970866141732586 Td
(```) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 380.3970866141732472 Td
(Behalte ggf. im Blick, was das Zielsystem \(wie XNAT oder fremde Tools\) erwartet und) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 361.9970866141732699 Td
(welche Rechte für anschließende Verarbeitungsschritte benötigt werden.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 325.1970866141732586 Td
(#### Hinweis zur Sicherheit:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 306.7970866141732813 Td
(Berechtigung 0o666 \(rw-rw-rw-\) bedeutet, dass **jeder Benutzer** auf dem System) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 288.397086614173304 Td
(die Datei ändern kann. Aus Datenschutz- und Integritätsgründen sollte das nicht) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 269.9970866141732131 Td
(unnötig gesetzt werden.) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 233.1970866141732586 Td
(---) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 196.397086614173304 Td
(**Zusammenfassung:**  ) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 177.9970866141733268 Td
(Du kannst `chmod` meist weglassen. Füge es nur hinzu, wenn du konkrete) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 159.5970866141732358 Td
(Berechtigungsprobleme hast bzw. fremde Prozesse auf die Datei zugreifen müssen.) Tj
ET
endstream
endobj
21 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 22 0 R
>>
endobj
22 0 obj
<<
/Length 3695
>>
stream
0.5670000000000001 w
0 G
BT
/F2 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(Bousfiha, Tanae:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 756.8506299212598378 Td
(gib mi bitte eienen Skript ohne chmod) Tj
ET
BT
/F2 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 710.1041732283464398 Td
(HAWKI) Tj
ET
BT
/F2 10 Tf
11.5 TL
0 g
128.9763779527559109 710.1041732283464398 Td
(\(gpt-4.1\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 681.7577165354330191 Td
(Natürlich! Hier ist dein Skript, technisch und übersichtlich, **ohne die `chmod`-Zeile**:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 644.9577165354330646 Td
(```python) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 626.5577165354330873 Td
(import os) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 608.15771653543311 Td
(import pandas as pd) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 571.3577165354330418 Td
(# Konfiguration) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 552.9577165354330646 Td
(INPUT_DIR = "/app/input") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 534.5577165354330873 Td
(OUTPUT_DIR = "/app/output") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 516.15771653543311 Td
(OUTPUT_FILE = "osa_result.csv"  # exakt dieser Dateiname wird von XNAT erwartet) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 479.3577165354330418 Td
(def calculate_osa_risk_single\(row\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 460.9577165354330646 Td
(    # Bereinigung der Keys und Werte) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 442.5577165354330873 Td
(    row = {k.strip\(\).lower\(\): str\(v\).strip\(\).lower\(\) for k, v in row.items\(\) if pd.notnull\(v\)}) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 405.7577165354330759 Td
(    geschlecht = row.get\("geschlecht", ""\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 387.3577165354330987 Td
(    geschlecht_score = 1 if geschlecht in ['m', 'mann', 'manlich', 'männlich'] else 0) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 350.5577165354330873 Td
(    score = geschlecht_score) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 332.15771653543311 Td
(    for key, value in row.items\(\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 313.7577165354331328 Td
(        if key != 'geschlecht':) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 295.3577165354330418 Td
(            if value == "yes":) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 276.9577165354330646 Td
(                score += 1) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 240.15771653543311 Td
(    if score >= 5:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 221.7577165354331328 Td
(        risiko = "hoch") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 203.3577165354330418 Td
(    elif score >= 3:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 184.9577165354330646 Td
(        risiko = "mittel") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 166.5577165354330873 Td
(    else:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 148.15771653543311 Td
(        risiko = "niedrig") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 111.3577165354331555 Td
(    return pd.DataFrame\([{"stopbang_score": score, "osa_risiko": risiko}]\)) Tj
ET
endstream
endobj
23 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 24 0 R
>>
endobj
24 0 obj
<<
/Length 4293
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 766.7970866141731676 Td
(def main\(\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 748.3970866141731904 Td
(    print\("Start OSA-Analyse"\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 729.9970866141732131 Td
(    # Stelle sicher, dass das Output-Verzeichnis existiert) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 711.5970866141732358 Td
(    os.makedirs\(OUTPUT_DIR, exist_ok=True\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 674.7970866141731676 Td
(    print\("Inhalt von INPUT_DIR:", os.listdir\(INPUT_DIR\)\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 637.9970866141732131 Td
(    input_files = [f for f in os.listdir\(INPUT_DIR\) if f.lower\(\).endswith\(\('.csv', '.tsv', '.txt'\)\)]) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 619.5970866141732358 Td
(    print\("Gefundene Eingabedateien:", input_files\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 582.7970866141731676 Td
(    result_df = pd.DataFrame\([{"stopbang_score": "Fehler", "osa_risiko": "Keine) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 564.397086614173304 Td
(Eingabedatei gefunden"}]\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 527.5970866141732358 Td
(    if input_files:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 509.1970866141732586 Td
(        input_file = input_files[0]) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 490.7970866141732245 Td
(        input_path = os.path.join\(INPUT_DIR, input_file\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 472.3970866141732472 Td
(        print\(f"Verarbeite Datei: {input_file}"\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 435.5970866141732358 Td
(        # Trennzeichen erkennen) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 417.1970866141732586 Td
(        try:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 398.7970866141732245 Td
(            if input_path.endswith\(".csv"\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 380.3970866141732472 Td
(                sep = ",") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 361.9970866141732699 Td
(            elif input_path.endswith\(".tsv"\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 343.5970866141732358 Td
(                sep = "\\t") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 325.1970866141732586 Td
(            elif input_path.endswith\(".txt"\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 306.7970866141732813 Td
(                with open\(input_path, 'r', encoding='utf-8'\) as f:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 288.397086614173304 Td
(                    first_line = f.readline\(\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 269.9970866141732131 Td
(                    if first_line.count\(';'\) > max\(first_line.count\(','\), first_line.count\('\\t'\)\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 251.5970866141732358 Td
(                        sep = ';') Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 233.1970866141732586 Td
(                    elif first_line.count\('\\t'\) > first_line.count\(','\):) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 214.7970866141732813 Td
(                        sep = '\\t') Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 196.397086614173304 Td
(                    else:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 177.9970866141733268 Td
(                        sep = ',') Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 159.5970866141732358 Td
(            else:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 141.1970866141732586 Td
(                sep = ",") Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 104.3970866141734177 Td
(            df = pd.read_csv\(input_path, sep=sep\)) Tj
ET
endstream
endobj
25 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 26 0 R
>>
endobj
26 0 obj
<<
/Length 3220
>>
stream
0.5670000000000001 w
0 G
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 785.1970866141732586 Td
(            print\("Gelesene Daten:"\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 766.7970866141731676 Td
(            print\(df\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 729.9970866141732131 Td
(            if df.empty or len\(df\) != 1:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 711.5970866141732358 Td
(                raise ValueError\("Datei ist leer oder enthält mehr als einen Patienten."\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 674.7970866141731676 Td
(            result_df = calculate_osa_risk_single\(df.iloc[0].to_dict\(\)\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 637.9970866141732131 Td
(        except Exception as e:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 619.5970866141732358 Td
(            print\(f"Fehler bei der Verarbeitung von {input_file}: {e}"\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 601.1970866141732586 Td
(            result_df = pd.DataFrame\([{"stopbang_score": "Fehler", "osa_risiko": str\(e\)}]\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 564.397086614173304 Td
(    output_path = os.path.join\(OUTPUT_DIR, OUTPUT_FILE\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 545.9970866141732131 Td
(    print\("Speichere Ergebnis nach:", output_path\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 509.1970866141732586 Td
(    try:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 490.7970866141732245 Td
(        result_df.to_csv\(output_path, index=False\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 472.3970866141732472 Td
(        print\("Datei erfolgreich gespeichert."\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 453.9970866141732699 Td
(    except Exception as e:) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 435.5970866141732358 Td
(        print\("Fehler beim Speichern:", e\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 398.7970866141732245 Td
(    print\("Inhalt von OUTPUT_DIR:", os.listdir\(OUTPUT_DIR\)\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 361.9970866141732699 Td
(if __name__ == "__main__":) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 343.5970866141732358 Td
(    main\(\)) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 325.1970866141732586 Td
(```) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 288.397086614173304 Td
(**Hinweis:**  ) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 269.9970866141732131 Td
(Falls du je auf Berechtigungsprobleme stößt oder das Zielsystem spezielle Rechte) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 251.5970866141732358 Td
(erwartet, kann die `chmod`-Zeile nachträglich wieder aktiviert werden. Ansonsten ist) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
0 g
70.8661417322834666 233.1970866141732586 Td
(sie nicht erforderlich.) Tj
ET
endstream
endobj
1 0 obj
<</Type /Pages
/Kids [3 0 R 5 0 R 7 0 R 9 0 R 11 0 R 13 0 R 15 0 R 17 0 R 19 0 R 21 0 R 23 0 R 25 0 R ]
/Count 12
>>
endobj
27 0 obj
<<
/Type /Font
/BaseFont /Helvetica
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
28 0 obj
<<
/Type /Font
/BaseFont /Helvetica-Bold
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
29 0 obj
<<
/Type /Font
/BaseFont /Helvetica-Oblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
30 0 obj
<<
/Type /Font
/BaseFont /Helvetica-BoldOblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
31 0 obj
<<
/Type /Font
/BaseFont /Courier
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
32 0 obj
<<
/Type /Font
/BaseFont /Courier-Bold
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
33 0 obj
<<
/Type /Font
/BaseFont /Courier-Oblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
34 0 obj
<<
/Type /Font
/BaseFont /Courier-BoldOblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
35 0 obj
<<
/Type /Font
/BaseFont /Times-Roman
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
36 0 obj
<<
/Type /Font
/BaseFont /Times-Bold
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
37 0 obj
<<
/Type /Font
/BaseFont /Times-Italic
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
38 0 obj
<<
/Type /Font
/BaseFont /Times-BoldItalic
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
39 0 obj
<<
/Type /Font
/BaseFont /ZapfDingbats
/Subtype /Type1
/FirstChar 32
/LastChar 255
>>
endobj
40 0 obj
<<
/Type /Font
/BaseFont /Symbol
/Subtype /Type1
/FirstChar 32
/LastChar 255
>>
endobj
2 0 obj
<<
/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]
/Font <<
/F1 27 0 R
/F2 28 0 R
/F3 29 0 R
/F4 30 0 R
/F5 31 0 R
/F6 32 0 R
/F7 33 0 R
/F8 34 0 R
/F9 35 0 R
/F10 36 0 R
/F11 37 0 R
/F12 38 0 R
/F13 39 0 R
/F14 40 0 R
>>
/XObject <<
>>
>>
endobj
41 0 obj
<<
/Producer (jsPDF 2.5.2)
/CreationDate (D:20250610164309+02'00')
>>
endobj
42 0 obj
<<
/Type /Catalog
/Pages 1 0 R
/OpenAction [3 0 R /FitH null]
/PageLayout /OneColumn
>>
endobj
xref
0 43
0000000000 65535 f 
0000048293 00000 n 
0000050190 00000 n 
0000000015 00000 n 
0000000152 00000 n 
0000003524 00000 n 
0000003661 00000 n 
0000007444 00000 n 
0000007581 00000 n 
0000011716 00000 n 
0000011854 00000 n 
0000015893 00000 n 
0000016032 00000 n 
0000019684 00000 n 
0000019823 00000 n 
0000023835 00000 n 
0000023974 00000 n 
0000028364 00000 n 
0000028503 00000 n 
0000032363 00000 n 
0000032502 00000 n 
0000036509 00000 n 
0000036648 00000 n 
0000040396 00000 n 
0000040535 00000 n 
0000044881 00000 n 
0000045020 00000 n 
0000048425 00000 n 
0000048551 00000 n 
0000048682 00000 n 
0000048816 00000 n 
0000048954 00000 n 
0000049078 00000 n 
0000049207 00000 n 
0000049339 00000 n 
0000049475 00000 n 
0000049603 00000 n 
0000049730 00000 n 
0000049859 00000 n 
0000049992 00000 n 
0000050094 00000 n 
0000050443 00000 n 
0000050529 00000 n 
trailer
<<
/Size 43
/Root 42 0 R
/Info 41 0 R
/ID [ <C9FD55B9987CBB4B161DA3E109DF145E> <C9FD55B9987CBB4B161DA3E109DF145E> ]
>>
startxref
50633
%%EOF